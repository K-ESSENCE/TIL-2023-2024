### 컨테이너 중지 재시작

ps -a 로 꺼진애 찾아서
docker start 2dd와 같이

re-start하면 바로 실행됨.

dockuer run -p 3000:80 2dd와는 다름

docker start는 백그라운드

docker run 은 foreground 에서 실행

docker start 로 시작하면 detached모드가 디폴트이고

docker run으로 실행하면 attached모드가 디폴트임

docker run -p 8000:80 -d 2dd 에서 -d가 dettached모드

분리된 컨테이너를 다시 연결할 때는 docker container attach \_컨테이너 이름

docekr attach 컨테이너이름

앞으로 로그 메시지를 보기 위해 다시 연결 가능

'docker logs 명령어.'

docker log -f 로 follow 옵션 넣으면 향후 출력 로그 결과를 계속 볼 수 있다.
이전것도 나옴.

### 인터렉티브 모드

-i는 인터렉티브 모드.
-t는 터미널을 생성한다는 모드

it 가 다 붙으면 input을 입력가능하며 동시에 입력을 표현하는 터미널도 얻게됨

에러가 왜 뜨나 했더니 받는것을 실행할수없어서. 충돌난거

도커 start는 기본적으로 dettach라서 컨테이너랑 소통할수없음

docker start -a로 실행하면되지만 이상하게도 작동한 후 한번만 입력가능.

start -a -i 로 수신과 입력 둘 다 할 수있게됨.

### 이미지 & 컨테이너 삭제하기

docker rm 하고 여러개 아이디 집어넣어서 삭제하는 노가다방법

ps는 컨테이너를 images는 image들을 리스팅함

컨테이너 제거는 rm

이미지 제거는 rmi

이미지가 더이상 사용되지않고 중지된 컨테이너에 있을때에만 이미지 제거 가능

우선적으로 컨테이너가 제거되어야함.

- 중지된 컨테이너 자동 삭제 하기

--rm 커맨드를 사용하면 매번 중지된애를 정리안해줘도됨 run 명령어에 추가

### 이미지 검사

이미지에 대해 알고싶다? => docker image inspect 커맨드 사용

노출될 포트 / 환경변수 /도커버전 등등이 다 나온다.

### 컨테이너 파일복사

커테이너를 살펴보는것이 아니라 실행중인 상태에서 뭔갈 추출하거나 추가하고싶다면?

cp 커맨드 => copy 실행중인애에서 밖으로 복사

cp '복사하고자하는폴더/파일 가리키기 혹은 . 으로 그 폴더안의 전체' '어디로 복사할 것인지 ex)c:/tests와같은형태'

로컬에서 파일 삭제하고 복사하고자하는 폴더를 우리가 아까 복사했던 폴더로 하고 파일이원래있었던(방금 지워버린 ) 경로로 설정하면 안에있는것을 빼옴

소스코드가 바뀌었다면 일반적으로는 그 때문에 이미지를 다시 빌드하고 컨테이너를 다시 시작해야함.

하지만 변경된 코드를 컨테이너에 복사할수도있음 => 그러나 일반적으로는 그렇게 안함 (오류가발생하기 쉽다. => 바뀐 파일이 뭔지 추적하기도어려움)
그리고 실행중인파일을 교체하는것도 불가능하기때문에 좋은 해결책은 아님

### 컨테이너에 이름 & 태그 지정하기

docker images

docker run --name

--name '어쩌고'

이미지에도 비슷한 컨셉이있다. Tag

Tag에는 두가지가있음 name 리포지토리라고도함 :tag ':'로구분됨

두가지로 컨셉이 나뉘는 이유는 간단한데 name은 일반적인 이름을 설정(여러개의 특정화된 이미지 그룹)

태그는 옵션=> 이미지의 특정화된 버전 명시 가능

docker build -t name:tag

docker build -t like:latest .

이런식으로 like라는 이름의 최신버전임을 나타낼수있음.

버전 넘버로 해도되고 이건 정말 다양하게 할 수 있다.

### 이미지 공유

팀원이나 컨테이너를 배포하려는 서버에 공유하기위해서라도 할수있다.

이미지가있는 사람은 누구든 그 이미지를 가지고 컨테이너를 만들 수 있다.

이미지를 공유하는 두가지 방식

1. dockerfile

도커파일과 애플리케이션 소스코드

2. share a built images

이미지 다운로드 (추가 빌드 필요없음 모든게 포함되어있다.)

### 도커 허브

이미지를 pus 할 수 있는 주요 두가지 위치가있음

1. docker hub

공식 도커 이미지 레지스트리

모든 사람이 사용할것인지/ 제안을 둘 것인지 설정가능

2. private registry
   개인 레지스트리

모든 사람이 보는지 우리팀만 보는지는 사용중인 공급자에 따라있음.

레지스트리에 push 해서 허브또는 다른 공급자에게 제공할수있음

docker pull 해서 push된 image 사용 하는 형태

docker prune -a (모든 로컬 이미지 삭제)

docker logout

이미지 풀링했다면 docker run 만으로는 최신업데이트 이미지를 제공받지못함.

docker pull 이미지이름 입력 해서 수동으로 실행해야됨.

docker run 찾는게없으면 풀링하지만 최신버전인지아닌지는 신경 안씀

### 정리

레이어개념은 빌드를 빨리 하기위함
