sqld 이전에

### 데이터 베이스가 뭐고 어떻게 쓰이는가

여러 데이터들을 통합적으로 관리하는 기술이 db

여러 사람들이 함께 사용하고 공유할 수 있음.

db그림의 통은 하드디스크임 ⇒ 데이터가 모여있는 로고 같은 느낌

데이터베이스에서 원하는 정보 조회나 뽑아오는거 조작하는거 이게 근본적인 이유

정보를 어디에 어떻게 저장해야하는가

현실세계의 데이터를 단순화해서 실제데이터로 저장함.

데이터 모델링 ⇒ 만들고싶다⇒단순설계도 ⇒ 상세 설계도 ⇒ 구축 ⇒ 제작

단순한거 개념

좀 더 상세한거 논리

구축 물리

요구사항 접수하고 대충설계 개념 상세하게 설계 한게 논리 만든게 물리

---

### 엔터티란?

업무에 필요한 정보를 저장 관리하기위한 집합적인 명사 개념

- 특징
  - 유일한 식별자로 식별이 가능해야됨
  - 인스턴스가 2개이상
  - 관계가 하나이상
  - 속성이 2개이상

### 인스턴스란?

엔터티 집합 내에 존재하는 개별적인 대상

직원안에 직원 a / b / c / d

### 엔터티의 분류 (유무형/발생시점 에 따라 분류)

시험에서는 종류위주로 물어봄

강의를 물리냐 개념이냐로 말하기 애매해서.

- 발생시점

기본키 / 중심/ 행위

처음 요구사항 봤을때 필요하겠다 한거 → 파생 → 파생

---

### 속성 이란?

업무상 관리하기 위해서 의미적으로 더는 분리되지않는 최소의 데이터 단위

속성은 엔터티가 가지는 공통적인 특징을 표현함.

### 엔터티, 인스턴스, 속성의 관계

1. 하나의 엔터티는 2개 이상의 인스턴스를 가짐
2. 하나의 엔터티는 2개 이상의 속성을 가짐
3. 속성은 각 인스턴스를 설명 가능
4. 하나의 속성에는 하나의 속성값만 들어감

### 식별자란?

엔터티 내 유일한 인스턴스를 식별할 수 있는 속성의 집함

속성의 분류

기본 : 업무로부터 추출한걸로 가장 많이 발생

설계 : 코드성이나 일련번호

파생: 다른 속성들로부터 계산/변형 되어 만들어진 속성

설계 속성 : designed

구성방식에 대한 분류 ⇒ PK FK

FK 는 외래키

PK는 프라이머리 키 ⇒ 식별자

### 도메인이란?

각 속성이 입력 받을 수 있는 값의 정의 및 범위를 의미

성능보다 정규화에 포인트를 맞춰서 출제

1,2,3차 까지 정규화했을떄 어떤식으로 데이터가 초점이 맞춰지는지.

데이터 베이스라는건 간단히 말해서 데이터의 집합이라고 보면됨.

데이터를 여러개로 해놓으면 찾기 힘드니까 잘보고 관리할수있게 하는게 dbms

dbms에 대해서 설명하는게 1과목.

설계방식같은것들을 이해할 필요가있음.

엑셀에 어떤 데이터를 표형태로 만들었다고 하면 표 자체를 테이블이라고하면됨

때로는 표를 Entity라고도함

물리, 논리적 설계방식에 따라 다름.

설계 도면에서는 Entity 속성/ 인스턴스 이렇게 불리는거고

물리적으로 지어지면 테이블 컬럼 행 이런식으로 용어가 매칭이된다.

사실상 테이블과 entity가 같은 말이과 속성과 컬럼 행과 인스턴스 다 같은 의미라고 생각하면된다.

### 모델링

데이터의 요구사항 같은것들을 만들어가는 과정 ⇒ 모델링

현실세계의 비즈니스 프로세스와 데이터 요구사항을 추상적이고 구조화된 방식으로 표현하는 과정

## 모델링의 특징

### 단순화

데이터가 복잡하게되면 업무적으로 사용하기 번거로움 ⇒ 최대한 단순화해서 핵심요소에 접근

### 추상화

현실세계를 일정한 형식에 맞추어 간략하게 표현하는 과정

### 명확화

### 데이터 모델링 유의점

1. 중복
   1. 같은 정보 저장되면 저장공간의 낭비가 되니 이점을 유의해야된다.
2. 비유연성
   1. 업무적 변화에 유연한 대처가 필요함 그렇지않으면 유지보수 비용이 커진다.
3. 비일관성
   1. 데이터베이스 내의 정보가 모순되거나 상반된 내용을 갖는 상태를 의미함.
   2. 데이터 품질 관리 필요
   3. 데이터의 중복이 없더라도 비일관성은 발생할 수 있음.

### 데이터 모델링 3가지 요소

대상(Entity): 업무가 관리하고자 하는 대상(객체)

속성(Attribute) : 대상들이 갖는 속성(하나의 특징으로 정의될 수 있는 것)

관계 (Relationship) : 대상들 간의 관계

### 데이터 모델링의 3단계

1. 개념적 모델링
   1. 업무 중심적이고 포괄적(전사적)인 수준의 모델링
   2. 추상화 수준이 가장 높음
   3. **업무를 분석 뒤 업무의 핵심 엔티티를 추출**하는 단계
   4. 도출된 핵심 엔티티들과의 관계뜰을 표현하기위해 ERD작성
2. 논리적 모델링
   1. 개념적 모델링의 결과를 토대로 세부속성, 식별자, 관계 등을 표현하는 단계
   2. 데이터 구조를 정의하기 떄문에 비슷한 업무나 프로젝트에서 동일한 형태의 데이터 사용 시 재사용 가능
   3. 데이터 정규화 수행
   4. 비슷한 업무에서 재사용이 가능
3. 물리적 모델링
   1. 논리 설계도를 그대로만듦
   2. 추상화 수준은 가장 낮음 (가장 구체적인 모델링이므로)

### ERD : 데이터 모델의 표기법

엔티티와 엔티티간의 관계를 시각적으로 표현한 다이어그램

어떤 주 식별자를 가지고있는지 참조관계 등을 포괄적으로 만든 일종의 설계도

### ERD 작성 절차

1. 엔티티 도출
2. 엔티티 배치
3. 관계 설정
4. 관계명 서술
5. 관계의 참여도 기술
6. 필수여부 확인

---

## 엔티티

현실세계에서 독립적으로 식별 간으한 객체나 사물을 나타냄

엔티티와 속성, 인스턴스 등의 관계

엔티티 : 학생

속성: 학번 , 이름 , 학과 등

식별자 : 학번

인스턴스 : 특정 학생의 데이터

### 엔티티 특징

유일한 식별에 의해 식별가능

이름은 중복되니까 사번같은거

업무에서 필요하고 관리하고자 하는 정보이자 여러 인스턴스들의 집합이여야 됨

엔티티는 반드시 속성을 2개이상 가짐

하나의 인스턴스는 속성들에 대해 1개의 속성값만 가지며 만들었는데 안사용되면 추후에 제거 해야됨

다른 엔티티와 최소 1개이상의 관계를 갖고있어야됨 (1:다 부모자식등의관계 )

사실상 관계가없는건 부적절한것임

### 엔티티의 분류

1. 유형과 무형에 따른 분류

   1. 유형 엔티티
      1. 사원,물품
   2. 개념엔티티
      1. 물리적인 형태가없음
      2. 조직,보험상품
   3. 사건엔티티
      1. 업무를 수행에 따라 발생하는 엔티티
      2. 주문 청구 미납

1. 발생 시점에 따른 분류
   1. 기본 엔티티
      1. 업무에 원래 존재하는 정보
      2. 사원 부서
   2. 중심 엔티티
      1. 기본엔티티로 부터 파생
      2. 계약 사고 청구
   3. 행위 엔티티
      1. 중심엔티티의 확장
      2. 2개이상의 부모엔티티로 부터 발생
      3. 보다 자주바뀌는 아이
      4. 상세 설계 단계에서 주로 나타남
      5. 주문 (고객과 상품)/ 사원변경 이력 등등

엔티티의 명명

현업에서 사용하는 용어 사용

가능하면 약자 사용은 자제

단수 명사 사용

모든 엔티티에서 유일하게 이름 부여

엔티티 생성 의미대로 이름부여

---

엔터티였네 사각형으로 표현

속성은 표기법이다른데 IE 랑 Baker 표기법에 따라 ERD를 표현함.

IE는 식별자 밑에는 속성

Baker는 네모안에 이름 #으로 주식별자 나머지는 다른거

---

### 속성 개념

속성은 업무에서 필요로 하는 고유한 성질, 특징을 의미함 (관찰대상 → 칼럼으로 표현할 수 있는 단위)

인스턴스에서는 더이상 분리되지않는 최소의 데이터 단위

학생 엔터티에 이름, 학번, 학과번호등이 속성이 될 수 있음

- 엔터티, 인스턴스, 속성, 속성값의 관계

2개 이상의 인스턴스 집합이어야 한다.

- 속성의 특징
  - 정해진 주식별자에 함수적 종속성을 가져야 함
  - 각 송성이 하나의 값을 갖고있음을 의미 (속성의 원자성)

하나의 속성에 여러개 값이 있으면 엔터티를 분리해줄 필요가 있음.

\*\*원자성이란 : 인스턴스가 해당 속성에 대해서 단일하고 명확한 값을 가지는것 .

- 함수적 종속성
  - A의 값에 의해 다른 속성 B도 유일하게 결정된다면 , A→B라고 표현함.
  - 완전 함수적 종속
    - PK를 구성하는 칼럼이 하나일수도 여러개일수도있는데 이 컬럼 모두를 고려할때

설계 속성: 기본속성외에 업무 규칙화할떄 만들어지거나 기본 속성을 변형하여 만들어지는 속성 ⇒ 상품코드 / 지점코드 / 예금 분류 등

파생 속성 : 다른 속성에 의해 만들어지는 속성/ 일반적으로 계산된 값들이 해당

PK기본키 FK 외래기 일반속성: PK FK에 포함되지않는 속성

- 분해여부
  - 단일
    - 하나의 의미로 구성된 경우
  - 복합
    - 여러개의 의미로 구성된 경우
  - 다중값
    - 속성에 여러 개의 값을 가질 수 있는 경우

도메인? → 속성값이 갖는 값의 범위를 말함

데이터 타입과 크기 제약사항등을 정의하는것임

### 속성 개념

속성은 업무에서 필요로 하는 고유한 성질, 특징을 의미함 (관찰대상 → 칼럼으로 표현할 수 있는 단위)

인스턴스에서는 더이상 분리되지않는 최소의 데이터 단위

학생 엔터티에 이름, 학번, 학과번호등이 속성이 될 수 있음

- 엔터티, 인스턴스, 속성, 속성값의 관계

2개 이상의 인스턴스 집합이어야 한다.

- 속성의 특징
  - 정해진 주식별자에 함수적 종속성을 가져야 함
  - 각 송성이 하나의 값을 갖고있음을 의미 (속성의 원자성)

하나의 속성에 여러개 값이 있으면 엔터티를 분리해줄 필요가 있음.

\*\*원자성이란 : 인스턴스가 해당 속성에 대해서 단일하고 명확한 값을 가지는것 .

- 함수적 종속성
  - A의 값에 의해 다른 속성 B도 유일하게 결정된다면 , A→B라고 표현함.
  - 완전 함수적 종속
    - PK를 구성하는 칼럼이 하나일수도 여러개일수도있는데 이 컬럼 모두를 고려할때

설계 속성: 기본속성외에 업무 규칙화할떄 만들어지거나 기본 속성을 변형하여 만들어지는 속성 ⇒ 상품코드 / 지점코드 / 예금 분류 등

파생 속성 : 다른 속성에 의해 만들어지는 속성/ 일반적으로 계산된 값들이 해당

PK기본키 FK 외래기 일반속성: PK FK에 포함되지않는 속성

- 분해여부
  - 단일
    - 하나의 의미로 구성된 경우
  - 복합
    - 여러개의 의미로 구성된 경우
  - 다중값
    - 속성에 여러 개의 값을 가질 수 있는 경우

도메인? → 속성값이 갖는 값의 범위를 말함

데이터 타입과 크기 제약사항등을 정의하는것임

---

### 관계

관계는 엔터티들간의 연관성을 나타냄

인스턴스끼리 가지고있는 연결고리를 잘 파악해서 정의해줘야될 필요성이있음.

관계를 존재/ 행위적 관계로 표현하기도함

존재적 ⇒ 한 엔터티가 다른 엔터티의 존재에 영향을 미침

부서가 삭제되면 사원의 존재자체에 영향을 미치는.

행위적 관계 ⇒ 엔터티가 특정 행위를 해서 발생.

고객 ⇒ 주문

관계의 구성

1. 관계명
2. 차수 // 한 엔터티의 레코드(인스턴스)가 다른 엔터티의 레코드(인스턴스)와 어떻게 연결되는지를 나타내는 표현 // 1:1 1:N 같은거
   1. 1:1
      1. 완전 1:1 / 선택적 1:1 관계
      2. 사원은 반드시 소속부서가 있어야되면 완전 1:1 / 부서정보가 확정이아니면 선택적 1:1
   2. 1대N
      1. 엔터티 하나의 행에 다른 엔터티의 값이 여러 개 있는 관계
         1. 고객은 여러 개 계좌를 소유 가능
   3. M대N의관계
      1. 두 테이블 조인시 카테시안 곱이 발생(N\*M) 이러면 성능 안좋음 / 두 엔터티를 연결하는 연결엔터티의 추가로 1대 N관계로 해소할 필요가 있음
         1. 하나의 학생이 여러강의 수강 / 강의 입장에서도 여러명의 학생이 있을 수 있음
         2. 이걸 해결하기위해서는 구매이력 수강이력이 필요함

- 관계의 페어링

엔터티 안에 인스턴스가 개별적으로 관계를 가지는 것

관계의 차수와 페어링 차이 ? ⇒ 학생과 강의 엔터티는 관계를 가짐

한 학생이 여러개 강의 / 강의 입장에서 여러개의 학생 ⇒ 차수 M:N

인스턴스의 관계를 보면 학생 A가 강의 B를 언제 수강했고 성적 얼마 받았는 특정 페어링 형성

### 식별자

하나의 엔터티에 구성된 여러 속성 중 대표할 수 있는 속성

유일한 식별자가 존재해야 함

식별자는 논리에서 사용하고 물리로 가면 키로 표현

- 주식별자

  - 유일성
  - 최소성
    - 하나의 속성 및 소수의 속성만으로. 불필요한 식별자 안끼는거
  - 불변성
  - 존재성
    - NULL허용 안함

- 식별자 분류

  - 대표성 여부
    - 주식별자
    - 보조식별자
      - 주민번호 (보안문제/유일성과 최소성은 만족하지만 대표성을 만족못함)
  - 생성 여부
    - 내부식별자
      - 다른 엔터티 참조없이
    - 외부식별자
      - 다른엔터티와 관계로 인해 만들어지는 식별자 (외래키)
        - 우편번호가 대표적임
  - 속성 수에 따라
    - 단일
    - 복합
  - 대체 여부
    - 본질식별자
      - 비즈니스 프로세스에 의해 만들어짐 (주문번호)
    - 인조식별자
      - 인위적으로만듦(부서코드)

- 주식별자 도출기준

  - 자주 이용되는 속성
    - select문이라고하면 where절에서 가장 많이 언급되는것
  - 명칭이나 내역같은 이름은 피하고 부서코드 같은 걸 주식별자로 하는게 좋음
  - 속성의 수를 최소한 적게 구성
    - 너무 많은 주식별자 구성시 조인으로 인한 성능저하 발생 우려
  - 일반적으로 7~8개 이상의 주식별자는 인조식별자를 만드는게 나음
    - 주문 에대한것 ⇒ 상품/고객번호 ++++로하느니 그냥 주문번호 만드는게 낫다.

- 관계간 엔터티 구분

  - 강한 개체
    - 독립적으로 존재가능한 엔터티
      - 고객이 존재해야 계좌가 존재 고객과 계좌중에는 고객이강하다.
  - 약한 개체
    - 독립적으로 존재 불가

- 식별 관계와 비식별 관계
  - 식별관계 /비식별 관계
    - PK를 서로 주식별자 키로 가지고있냐 아니면 약한쪽에서는 주식별자가 아닌 다른걸로 가지고있냐
  - 비식별관계는 ERD에서는 점선으로 표현한다.

### 정규화

엔터티를 분해하는 과정

왜 분해하느냐? ⇒ 학교 시스템을 db 설계 해야된다고 한다면 학생 학과 교수 등이있는데

학생이라고 하는 엔터티에 어디까지의 정보를 넣을지 고민하는 기준이 바로 정규화

기준에 맞게끔 여기까지만 넣고 나머지는 분리해! 이런 형태

중복 데이터를 제거하고 모델의 독립성을 확보함.

이상현성을 줄이기 위한 데이터 베이스 설계 기법

논리에서 수행됨

1~5정규화까지 있으나 실질적으로 3 정규화까지만 수행함.

- 이상현상
  - 정규화를 하지 않아 발생하는 현상 (삽입,갱신,삭제)
- 정규화 단계
  - 1 정규화 (1NF)
    - 원자성: 하나의 속성에 들어가는 하나의 값 /을 지키는 과정

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/7fd799fa-854a-425e-bbcb-0ac7db432369/280b467d-ebfd-4394-8a92-3340153ee9cf/image.png)

- 제 2 정규화

  - 1정규화 진행한 테이블에 대해 완전 함수 종속을 만들도록 테이블을 분해
  - 완전함수 종속? ⇒ 기본키를 구성하는 모든 컬럼의 값이 다른 컬럼을 결정하는 상태
    - 수강이력 ⇒ 여러 강의 수강가능하니 학생번호와 강의명이 pk가 됨
    - 강의실이야말로 학생번호와 강의명이 pk인데 pk에의해서 완전히 종속되지않음
    - 강의명에 의해서만 결정 ⇒ 이런걸 완전 함수 종속을 위배했다 / 부분 함수 종속이다 라고 함
    - 그래서 강의실이라는걸 pk로 부터 분리함.

  ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/7fd799fa-854a-425e-bbcb-0ac7db432369/5a810788-2b3b-4b69-b537-ac43198f8868/image.png)

- 제 3정규화
  - 제 2정규화를 진행한 테이블에 이행적 종속을 없애도록 테이블을 분리하는 과정
  - 이행적 종속? ⇒ A가 b를 결정 b가 c를 결정 c가 a 결정 서로 먹고먹히는 결정
  - 결국 ab, bc 로분리하느게 제 3정규화
  - ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/7fd799fa-854a-425e-bbcb-0ac7db432369/9f827a4f-6ff0-4cd8-8467-8996c5b3cc67/image.png)

계좌번호 ,에수금 , 관리점 코드 , 관리점

관리점은 관리점코드에 의해 변경됨

- 반정규화 / 역정규화
  - 정규화해서 분해하니까 너무 세세해서 합쳐서 보이려고하면 조인이 너무 성능 문제를 일으킨다고하면 오히려 다시 결합하기도 함
  - 데이터베이스의 성능 향상을 위해 중복을 허용하고 조인을 줄이는 데이터베이스 성능향상 기법
- 반정규화 수행 케이스

  - 속도가 느려지면
  - 다량의 범위를 자주 처리해야 되는 경우
  - 특정 범위의 데이터만 자주 처리하는 경우
  - 요약/집계 정보가 자주 요구되는 경우

  관계 : 엔터티 내의 인스턴스들 간에 서로 논리적인 연관성이 있는 상태

ERD의 E는 엔터티 R은 관계 D는 그림

결국 엔터티간의 관계를 그린 그림을 의미함.

개념적 모델리의 결과 산출물이 ERD임

UML 클래스 다이어그램은 연관관계는 실선 / 의존관계는 점선

### 관계를 표시하는 방법 ⇒ IE /BAKER

시험에서는 거의 IE 로 표현

관계명/관계차수/관계선택사양

관계명을 표시할때는 애매한 동사나 과거형은 피함.

관계차수는 엔터티 안에 인스턴스들이 얼마나 참여하는지를 의미함.

여러직원 가지고있다 “>” 로 표현

1:1관계는 그냥 작대기

IE는 1을 그림으로 표기 Baker는 없음

1:M은 그대로 “<”

N:M도 별거없네

관계 선택 사양은 필수/선택의 의미를 의미함.

숫자 0 기호가 들어갔으면 ⇒ 부서가 아직 안정해져서 소속이안되어있는경우

IE는 0 / baker는 반대쪽에 점선으로 표현

### 코드성 통계성이란?

엔터티는 1개이상의 관계를 가져야되는데 관계가 없는애는 쓸모없는애임

예외적으로 코드성, 통계성 엔터티는 관계를 따로 쓰지않음.

코드 ? ⇒ 값들을 코드 형태로 저장해서 쓰기 편하게 사용 성별이나 진행상태도 코드로 관리하는것 ⇒ 실무에서도 많이 쓰임.

월매출같은것들도 자체만으로도 의미를 가지니 예외적으로 허용함.

### 관계

관계는 엔터티들간의 연관성을 나타냄

인스턴스끼리 가지고있는 연결고리를 잘 파악해서 정의해줘야될 필요성이있음.

관계를 존재/ 행위적 관계로 표현하기도함

존재적 ⇒ 한 엔터티가 다른 엔터티의 존재에 영향을 미침

부서가 삭제되면 사원의 존재자체에 영향을 미치는.

행위적 관계 ⇒ 엔터티가 특정 행위를 해서 발생.

고객 ⇒ 주문

관계의 구성

1. 관계명
2. 차수 // 한 엔터티의 레코드(인스턴스)가 다른 엔터티의 레코드(인스턴스)와 어떻게 연결되는지를 나타내는 표현 // 1:1 1:N 같은거
   1. 1:1
      1. 완전 1:1 / 선택적 1:1 관계
      2. 사원은 반드시 소속부서가 있어야되면 완전 1:1 / 부서정보가 확정이아니면 선택적 1:1
   2. 1대N
      1. 엔터티 하나의 행에 다른 엔터티의 값이 여러 개 있는 관계
         1. 고객은 여러 개 계좌를 소유 가능
   3. M대N의관계
      1. 두 테이블 조인시 카테시안 곱이 발생(N\*M) 이러면 성능 안좋음 / 두 엔터티를 연결하는 연결엔터티의 추가로 1대 N관계로 해소할 필요가 있음
         1. 하나의 학생이 여러강의 수강 / 강의 입장에서도 여러명의 학생이 있을 수 있음
         2. 이걸 해결하기위해서는 구매이력 수강이력이 필요함

- 관계의 페어링

엔터티 안에 인스턴스가 개별적으로 관계를 가지는 것

관계의 차수와 페어링 차이 ? ⇒ 학생과 강의 엔터티는 관계를 가짐

한 학생이 여러개 강의 / 강의 입장에서 여러개의 학생 ⇒ 차수 M:N

인스턴스의 관계를 보면 학생 A가 강의 B를 언제 수강했고 성적 얼마 받았는 특정 페어링 형성

### 식별자

하나의 엔터티에 구성된 여러 속성 중 대표할 수 있는 속성

유일한 식별자가 존재해야 함

식별자는 논리에서 사용하고 물리로 가면 키로 표현

- 주식별자

  - 유일성
  - 최소성
    - 하나의 속성 및 소수의 속성만으로. 불필요한 식별자 안끼는거
  - 불변성
  - 존재성
    - NULL허용 안함

- 식별자 분류

  - 대표성 여부
    - 주식별자
    - 보조식별자
      - 주민번호 (보안문제/유일성과 최소성은 만족하지만 대표성을 만족못함)
  - 생성 여부
    - 내부식별자
      - 다른 엔터티 참조없이
    - 외부식별자
      - 다른엔터티와 관계로 인해 만들어지는 식별자 (외래키)
        - 우편번호가 대표적임
  - 속성 수에 따라
    - 단일
    - 복합
  - 대체 여부
    - 본질식별자
      - 비즈니스 프로세스에 의해 만들어짐 (주문번호)
    - 인조식별자
      - 인위적으로만듦(부서코드)

- 주식별자 도출기준

  - 자주 이용되는 속성
    - select문이라고하면 where절에서 가장 많이 언급되는것
  - 명칭이나 내역같은 이름은 피하고 부서코드 같은 걸 주식별자로 하는게 좋음
  - 속성의 수를 최소한 적게 구성
    - 너무 많은 주식별자 구성시 조인으로 인한 성능저하 발생 우려
  - 일반적으로 7~8개 이상의 주식별자는 인조식별자를 만드는게 나음
    - 주문 에대한것 ⇒ 상품/고객번호 ++++로하느니 그냥 주문번호 만드는게 낫다.

- 관계간 엔터티 구분

  - 강한 개체
    - 독립적으로 존재가능한 엔터티
      - 고객이 존재해야 계좌가 존재 고객과 계좌중에는 고객이강하다.
  - 약한 개체
    - 독립적으로 존재 불가

- 식별 관계와 비식별 관계
  - 식별관계 /비식별 관계
    - PK를 서로 주식별자 키로 가지고있냐 아니면 약한쪽에서는 주식별자가 아닌 다른걸로 가지고있냐
  - 비식별관계는 ERD에서는 점선으로 표현한다.

### 정규화

엔터티를 분해하는 과정

왜 분해하느냐? ⇒ 학교 시스템을 db 설계 해야된다고 한다면 학생 학과 교수 등이있는데

학생이라고 하는 엔터티에 어디까지의 정보를 넣을지 고민하는 기준이 바로 정규화

기준에 맞게끔 여기까지만 넣고 나머지는 분리해! 이런 형태

중복 데이터를 제거하고 모델의 독립성을 확보함.

이상현성을 줄이기 위한 데이터 베이스 설계 기법

논리에서 수행됨

1~5정규화까지 있으나 실질적으로 3 정규화까지만 수행함.

- 이상현상
  - 정규화를 하지 않아 발생하는 현상 (삽입,갱신,삭제)
- 정규화 단계
  - 1 정규화 (1NF)
    - 원자성: 하나의 속성에 들어가는 하나의 값 /을 지키는 과정

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/7fd799fa-854a-425e-bbcb-0ac7db432369/280b467d-ebfd-4394-8a92-3340153ee9cf/image.png)

- 제 2 정규화

  - 1정규화 진행한 테이블에 대해 완전 함수 종속을 만들도록 테이블을 분해
  - 완전함수 종속? ⇒ 기본키를 구성하는 모든 컬럼의 값이 다른 컬럼을 결정하는 상태
    - 수강이력 ⇒ 여러 강의 수강가능하니 학생번호와 강의명이 pk가 됨
    - 강의실이야말로 학생번호와 강의명이 pk인데 pk에의해서 완전히 종속되지않음
    - 강의명에 의해서만 결정 ⇒ 이런걸 완전 함수 종속을 위배했다 / 부분 함수 종속이다 라고 함
    - 그래서 강의실이라는걸 pk로 부터 분리함.

  ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/7fd799fa-854a-425e-bbcb-0ac7db432369/5a810788-2b3b-4b69-b537-ac43198f8868/image.png)

- 제 3정규화
  - 제 2정규화를 진행한 테이블에 이행적 종속을 없애도록 테이블을 분리하는 과정
  - 이행적 종속? ⇒ A가 b를 결정 b가 c를 결정 c가 a 결정 서로 먹고먹히는 결정
  - 결국 ab, bc 로분리하느게 제 3정규화
  - ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/7fd799fa-854a-425e-bbcb-0ac7db432369/9f827a4f-6ff0-4cd8-8467-8996c5b3cc67/image.png)

계좌번호 ,에수금 , 관리점 코드 , 관리점

관리점은 관리점코드에 의해 변경됨

- 반정규화 / 역정규화
  - 정규화해서 분해하니까 너무 세세해서 합쳐서 보이려고하면 조인이 너무 성능 문제를 일으킨다고하면 오히려 다시 결합하기도 함
  - 데이터베이스의 성능 향상을 위해 중복을 허용하고 조인을 줄이는 데이터베이스 성능향상 기법
- 반정규화 수행 케이스
  - 속도가 느려지면
  - 다량의 범위를 자주 처리해야 되는 경우
  - 특정 범위의 데이터만 자주 처리하는 경우
  - 요약/집계 정보가 자주 요구되는 경우

---

https://www.youtube.com/watch?v=QB_GYdHUHmA&list=PLbflMVhwy2jPIAzArCK90mqFlTtndFigS

### 관계와 조인의 이해

관계는 엔터티들의 연관성. 특히나 인스턴스간의 연결성을 페어링이라고함.

관계라고하는건 엔터티들을 어떻게 정의하냐에따라 달라질 수 있음

관계를 맺는다는것의 의미는 부모의 이름을 자식에 상속하는과정.

상속된 속성을 매핑키(조인키)로 활용

사원테이블과 부서테이블을 예로 들면

부모테이블이 먼저 필요함 ⇒ 부모라는건 먼저있어야되는 데이터

관계라는건 부모를 상속받는것.

### 관계의 분류

존재적관계 ⇒ 엔터티 간의 상태를 의미

행위 관계 ⇒ 엔터티 간의 행위가 의미가있는 것을 의미

### 조인의 의미

관계를 맺게되면 결과적으로 조인이라는 연결고리가 필요함.

결과적으로 두개를 다 보여줄때 연결코드로 보여줄수있는게 조인의 개념

제 3정규화로 쪼갠거 다 보여주고싶을때.

조인을 할때도 셀프조인이라는게있음 이런걸 계층형 모델이라고함.

### 상호베타적 관계

두 테이블 중 하나만 가능한 관계를 말함.

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/7fd799fa-854a-425e-bbcb-0ac7db432369/04f5657d-2354-492d-aca2-cab1205c7577/image.png)

### 트랜잭션

하나의 연속적인 업무 단위

트랜잭션에 의한 관계는 필수적인 관계 형태를 가짐.

계좌이체를 하려면 ⇒ 잔액확인 ⇒ UPDATE ⇒ 실패했으면 같은 것들까지 이런 연속적인 업무 단위를 트랜잭션이라고한다.

- 주의

  - 서로 독립적으로 발생하면 안됨
  - 부분 커밋불가
    - 동시 커밋 혹은 롤백처리

- 필수적, 선택적 관계를 ERD에서 표기
  - 원그리면 선택적
  - 바커에서는 실선 점선

## NULL

NULL과 빈문자열은 다른 개념

각 모델 설계시 각 컬럼별로 null허용하냐 안하냐를 설정함.

NULL을 포함한 연산은 항상 null이나온다.

NULL치환함수 같은것들이있다.

집계함수에서는 NULL을 제외한 연산결과를 리턴한다

집계함수?⇒ sum avg min max

가장 정확하게 행위 갯수를 세는건 \*

### 본질식별자, 인조식별자

본질은 업무에서 필요 인조는 관리를 위해서 만든 것

인조식별자의 단점은 중복데이터 발생 가능성 ⇒ 데이터 품질 저하

불필요한 인덱스 생성 ⇒ 저장공간 낭비 및 DML 성능 저하

인덱스는 원래 조회 성능 향상을 위하니 DML을 위한게아니다 보니 성능 조화

## 식별자와 데이터 모델

### 데이터 모델링이란?

현실세계의 복잡한 대상을 단순하게 표현하기 위해 추상화,단순화,명확화 하여 일정표기법으로 표시하는것

계획 분석 설계시 업무분석 및 설계, 설명에 사용 구축/운영시에는 변경, 관리, 목적으로 사용

모델링은 설계할때 사용하고 안쓰나보다할수도있는데

설계 개발 테스트 운영 전부 다 씀

- 개념적 모델링

  - 추상적
  - 업무중심적⇒ 개발적인 요소보다 업무적인 요소가 훨씬 더 많은 것 그래서 이걸보고 대화를함
  - 포괄적
  - 전사적
  - DBMS독립적
  - ERD생성

- 논리적 데이터 모델링

  - 키속성, 관계정의
  - 재사용성이 높음
  - 특정 DBMS에 종속적
  - 정규화 수행

- 물리적 데이터 모델링
  - 실제 DB에 이식되도록
  - 성능,저장 등 물리적 성격 고려
  - 수준이 구체적임

### 데이터 모델링이 왜 중요할까?

1. 파급효과 : 초반에 엉망으로 설계하고 개발하다가 나중에 엎게 되면 힘들어짐
   1. 설계랑 개발중 설계가 훨씬 중요함
2. 간결한 표현: 서로 의사소통을 위해 모델링된 설계도 (erd)으로 쉽게 이해가능
3. 데이터 품질: 애초에 데이터 모델링을 제대로해야 이상한 데이터가 안들어간다. (중복/유연성/일관성)

유연성 → 사소한 변화에도 데이터 정의가 변경됨

연락처가 있으면 이력이있음.

### 데이터베이스 3단계 구조

1. 외부 스키마 : 여러 사용자 각각의 관점
2. 개념 스키마 : 통합적 , 조직 전체의 DB관점
3. 내부 스키마 : 물리적 저장 구조 표현

각각의 스키마는 독립성을 가지고있음

### 식별자란?

유일하게 인스턴스 식별할수있는 속성의 집합 PK 랑 같음

대표성여부 , 스스로 생성여부, 단일속성여부, 대체여부

주식별자 도출이유? ⇒ 업무에서 자주쓰고, 속성의 수가 많지않아야되며 , 명칭,이름은 피해야됨

주민등록번호는 암호화가 되어야됨 민감정보
