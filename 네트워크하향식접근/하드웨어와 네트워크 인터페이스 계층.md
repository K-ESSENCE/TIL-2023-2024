# 네트워크 인터페이스 계층의 역할

## 다양한 하드웨어를 네트워크에 연결한다.

네트워크의 하드웨어를 제어하는 부분이 네트워크 인터페이스 계층이다.

여기서 말하는 하드웨어에는 네트워크 어댑터나 LAN 케이블, 광 케이블 등을 포함한다. 이러한 하드웨어들을 제어하면서 상위의 이넡넷 계층이 하위의 하드웨어 동작에 대해 신경 쓰지 않고 동작할 수 있도록 하는게 네트워크 인터페이스 계층의 역할임.

OSI 참조 모델에서는 프로토콜과 같이 소프트웨어와 관련된 부분을 데이터링크계층이라고하고 하드웨어와 관련된 부분을 물리계층이라고한다.

데이터를 전달하기 위해 전기 신호, 전파 , 광 신호 등의 다양한 방법을 이용할 수 있음.

## 네트워크 인터페이스 계층의 프로토콜

전화회선을 사용해서 원격자와 접속하는 PPP 와 동축 케이블이나 UTP 케이블을 사용하는 이더넷같은 프로토코들이 있다. 그외에도 어드레스 정보를 이용하여 목적지의 MAC어드레스를 알아내는 ARP 같은 프로토콜도있음.

## 네트워크에 연결되는 하드웨어

네트워크 통신에 사용되는 하드웨어들은 장비 간의 접속방식이나 신호를 주고받는 방식이 다양한데 이러한 내용은 각종 사양이나 규정에 정의되어 있다.

트랜스포트 계층과 인터넷 계층에서 사용되는 TCP/IP는 특정 하드웨어에 의존하지 않도록 설계되어 있는 반면, 네트워크 인터페이스 계층은 하드웨어와 뗄수 없는 관계

그래서 이더넷과 같은 기술에서는 소프트웨어 사양과 하드웨어 사양이 함께 존재한다.

# MAC 어드레스

## MAC 어드레스란?

네트워크 어댑터NIC에는 MAC 어드레스라고 하는 식별 번호가 부여되어 있다.

이 식별 번호는 제조사가 제조 단계부터 붙이는 것으로, 퍼블릭 IP어드레스와 비슷하게 전 세계의 네트워크 장비들이 서로 구분될 수 있도록 할당된다.

## 수신지 주소로 MAC 어드레스를 사용한다.

MAC 어드레스는 유선 LAN의 이더넷이나 무선 LAN 외에도 단거리 통신에 사용되는 블루투스 와 같은 다양한 연결에 사용됨.

네트워크 계층에서 보내는 데이터를 프레임이라고 부르는데, 이 프레임 아넹 송신지와 수신지의 MAC 어드레스 정보가 들어감.

## IP 어드레스와 MAC 어드레스의 차이점

전달할 목적지를 가리킨다는 점에서 MAC와 IP 어드레스는 유사함 그러나 IP 어드레스는 최종 목적지가 한번 설정되면 전송 과정 중에 변경되지 않지만 MAC 어드레스는 전송 과정 중에 통신 경로상에 다음 장비의 어드레스로 교체된다는 점이 다르다.

# 이더넷

## 이더넷이란?

유선 LAN은 통신 장비끼리 케이블로 연결하게 되는데, 이때 이더넷이라는 규격을 사용한다.

10BASE- 100 ⇒ 앞의 숫자별로 10Mbps / BASE-X 는 광섬유 나머지는 트위스트 페어 케이블

주파수가 높은 신호는 쉽게 감쇠하기 때문에 전송속도가 고속인 규격에서는 가능한 한 주파수가 높아지지 않도록 제한하는 대신 케이블 자체를 고급 사양으로 사용하고 있다.

## 프리앰블은 프레임의 시작을 알린다.

수신 측의 네트워크 어댑터는 전압의 높낮이가 변화하는 신호를 받아 0과 1의 디지털 신호로 복호화한다. 이때 전압이 변화하는 타이밍에 맞춰 신호를 분석하려면 어디부터가 시작인지 기준점을 알아야 한다. 그래서 프레임 앞부분에는 프리앰블이라고하는 패턴을 두어 신호의 시작을 알 수 있도록 만들어져 있다.

# 네트워크허브

이더넷에서는 l2 l3 스위치와 같은 네트워크 허브를 중계기기로 사용함

## 네트워크 허브의 동작 방식

넽워크의 구성 형태를 네트워크 토폴로지라고 함 이더넷은 그중 스타형임

유선 LAN에서는 네트워크 허브라는 장비에 케이블을 연결해서 네트워크를 구성함.

일반 가정에서는 인터넷 서비스 업체에서 임대한 초고속 인터넷 라우터를 사용하는 것이 일반적인데, 이 단말기에는 네트워크 허브 기능이 내장되어 있다. 네트워크 허브에는 리피터허브, L2 스위치 , L3 스위치 등이 있다.

허브는 바퀴의 중심 축 이라는 의미로, 네트워크 허브는 네트워크의 중심 역할을 함.

## L2 스위치가 통신하는 방식

통신 회선이 통신 당사자 간에만 독립적으로 만들어지기 때문에 여러 통신이 동시에 이루어지더라도 패킷 충돌이 발생하지 않는다.

### 브로드캐스트 도메인

수진지의 주소가 브로드케스트 어드레스일 때 데이터가 전달되는 범위를 의미한다.

L2 스위치로 네트워크를 구성하였다면 네트워크 전체가 브로드캐스트 도메인이 된다.

네ㅌ워크에 연결된 호스트의 수가 많을 경우 DHCP나 OS의 파일 공유와 같은 브로드캐스트 통신이 자주 사용되면 네트워크 내에 대량의 패킷이 발생해서 망이 혼잡해질 수도 있다.

- 리피터 허브와 콜리전 도메인

L2 스위치가 보급되기 전에는 한 개의 호스트에서 수신한 데이터를 다른 모든 호스트에게 전달하는 리피터 허브를 많이 사용

이 경우 모든 호스트가 회선을 공유하고 있는 상태라 여러대의 호스트가 동시에 통신하면 네트워크상에서 신호가 충돌할 수 있는데 충돌이 발생할 수 있는 범위를 충돌 도메인 혹은 콜리전 도메인 이라고 불렀음

이더넷 사양에서는 충돌이 발생한 경우 모든 호스트가 통신을 멈추고 대기하도록 규정하고 있으므로 접속한 호스트 대수가 늘어나는 만큼 통신 속도가 떨어져 효율적인 통신 못했다.

## 대규모 사무실에 적합한 L3 스위치

L3스위치는 OSI 참조 모델 중 네트워크 계층에 해당하고, TCP/IP 모델에서는 인터넷 계층의 기능까지 수행할 수 있는 네트워크 장비임 .

L3의 대표적인 기능으로 VLAN(virtual lan) 을 꼽을 수 있는데 이 기능인 LAN을 몇 개의 가상적인 네트워크로 분할해서 통신 효율을 높이기 위해 사용함.

VLAN을 구성하면 브로드캐스트 패킷을 VLAN 내의 호스트 범위로만 제한하여 전달 가능

같은 장비의 포트에 연결되어 있어도 서로 다른 네트워크 처럼 수어할 수 있다.

VLAN 별로 서로 다른 IP 어드레스를 가지는 네트워크를 만들 수 있다.

VLAN 내의 통신 방식은 L2 스위치와 같다.

라우터 처럼 라우팅을 하면서 네트워크를 넘나들 수 있다.

# 무선 LAN

## 무선 LAN의 통신 방식

정식 규격명은 IEEE 802.11 CSWA/CA 다른 통신 장비가 전파를 방산하고있지않은걸 확인하고 통신 시작하는 방식 을 사용함.

802.11 기본이 되는 규격

802.11 a ⇒ 5기가헤리츠

b= 2.4기가헤리츠

g ⇒ 2.4 OFDM방식으로 54Mbps 통신 가능

n ⇒ 여러 개의 안테나 600Mbps

## 무선 LAN의 프레임 구조

이더넷과 마찬가지로 무선 LAN에서도 통신할 때 주고받는 데이터를 프레임이라고 부른다. 다만 무선 LAN의 프레임에는 MAC 어드레스 필드가 4개나 되는데 무선 LAN끼리 통신하는 경우 무선 LAN 뒤에 유선 LAN이 연결되는 경우 등에 따라 MAC어드레스 정보가 할당되는 방식이달라진다.

프리앰블/ PCLP헤더(변조방식)/ 제어정보/ MAC 어드레스 123 / 일련변호 / 어드레스 4/ 데이터 본체/ FCS(프레임의 끝)

### 어드레스 정보의 설정 방식

무선 LAN의 통신에느 ㄴ송신지와 수신지 사이를 무선 AP가 중계하게 됨 그래서 프레임에는 송신지와 수신지의 MAC어드레스 외에도 무선 AP의 MAC 어드레스 정보도 들어감

# ARP

## IP 어드레스로 MAC 어드레스 알아내기

ff:ff:ff:ff:ff:ff 이 어드레스로 프레임을 보내면 네트워크 내의 모든 호스트가 받을 수 있음

이더넷이나 무선 LAN으로 데이터를 보내려면 수신측의 MAC 어드레스를 알고 있어야 함 이때 필요한 것이 ARP 송신 측 장비는 요청 패킷에 수신측의 IP 어드레스를 지정한 후 네트워크 전체에 브로드캐스트를 함.

요청을 받은 호스트들 중 수신자의 IP 어드레스가 자신의 IP 어드레스와 동일한 장비는 자신의 MAC 어드레스를 응답패킷에 설정하여 응답하게 됨.

송신지 장비는 수신지 장비의 IP 어드레스 정보를 사용하여 MAC 어드레스도 알 수 있게 된다.

## ARP 헤더

ARP 헤더에는 MAC 어드레스를 물어보는 송신지 어드레스 정보와 MAC 어드레스를 알 수 없는 목적지이ㅡ 어드레스를 담을 수 있는 필드가 있음 1은 요청 2는 응답

## 프락시 ARP

대리 ARP혹은 프락시 ARP는 호스트 대신 라우터가 ARP에 응답하는 기능을 말한다.

서브넷 마스크 값이 다른 호스트가 있을 떄 이 기능이 필요한데 통상적인 ARP 요청은 같은 네트워크 내에 있는 호스트들에게는 브로드캐스팅 되는 반면 , 서브넷 마스크가 다른 호스트에는 전달되지않기떄문에 사이에 있는 프락시 ARP 기능으로 자신의 MAC 어드레스를 대신 응답하여 중계할 수 있게 한다.
