# 네트워크와 보안

## 네트워크상에서의 보안 위협

정보유출, 사용자 신분 사칭, 데이터 위변조

## 암호화로 데이터를 보호한다.

공유키 암호화 / 공개 키 암호화 두가지 방식이 많이 활용됨

## 전자 인증서와 전자 서명

신분 사칭을 막기 위한 방법으로는 전자 인증서가 있고, 데이터 위변조를 막기 위한 방법으로는 전자 서명이 있다.

# 공유키와 공개 키

## 하나의 키로 암호화와 복호화를 하는 공유 키 암호화

하나의 키로 복호 암호 둘 다 하는게 공유키 암호화

같은 키를 가진 사람만 데이터를 복호화 할 수 있다.

## 제약 사항

처리 방식이 간단하고 암호화와 복호화를 하는 속도가 빠르다는 장점이 있지만, 키를 안전하게 공유하는 방법이 다소 어려울 수 있다. 암호화한 데이터를 공유할 모든 사람에게 같은 키를 나눠 줘야 하는 것이 관리 측면에서 적지 않은 부담이 될 수 있음

## 서로 다른 키로 암호화와 복호화를 하는 공개 키 암호화

암호화 키랑 복호화 키 따로 만들어 한 세트로 관리

한쪽 키로 암호환 것은 다른 한 키로만 복호화 가능 하나는 자기가 가지고 다른 하나는 상대에게 줌.

자기거를 비밀 키 개인키라고 하고 상대방한테 주는건 공개 키 라고 함.

자신의 공개 키를 사전에 보내고 미리 받은 받은 공개키로 데이터를 복호화 가능

# 전자증명서와 전자 서명

## 전자 인증서로 자기 자신이라는 것 증명하기

공개 키 암호화 방식을 사용하면 데이터 유출을 막을 수는 있지만, 공개 키를 보낸 사람이 엉뚱한 사람이라면 모르는 사람에게 데이터를 넘겨 줄 수있는 잠재 위험이 있음.

그래서 신분 사칭이나 메일 내용의 위변조를 막는 방법으로 인증 기관이 발행한 전자 인증서를 사용할 수 있다.

전자 인증서가 첨부된 메일을 보냄

## 전자 인증서를 사용하는 신분 사칭 막기

CA (인증기관)에 요청해서 받을 수 있는 전자 인증서.

전자 서명은 이 공개 키는 이 소유자의 것이다 라는것의 보증 역할을 함.

## PKI

공개 키나 전자 인증서 등의 보안 인프라를 통틀어 공개 키 기반 구조라고 한다.

공개 키 기반 구조가 보안 취약점의 많은 부분을 제거해 주기는 하나, 피싱 사이트로 인한 금융 사기나 컴퓨터 바이러스로 인한 보안 위협 등에 대해서는 대응 가능한 영역이 아니기 떄문에 막을 수 없다.

## 전자 서명

전자 서명을 만들기 위해서는 원본 데이터의 해시 값을 구한 후 이것을 개인 키로 암호화 하면 됨

개인키로 암호화한 데이터는 공개키로 복호화할수있음 전자 증명서에 포함되는 공개키로 전자 서명을 복원한 후 메시지 다이제스트가 일치한지 확인해서 위변조되지않았다는것을 증명함.

해시 ⇒ 특수 알고리즘으로 데이터를 요약하는 것

원본 데이터를 몰라도 해시값만 비교해서 일치여부 확인 가능

## 이메일의 안전한 전달을 보장하는 S/MIME

S/MIME는 통신 쌍방이 전자 인증서를 갖고 있는 경우에 사용가능 공개 키 방식 과 공유 키 방식 둘 다 조합함

섞어 쓰는 이유?⇒ 연산 처리 측면에서 부담이 적어서 SSL이나 SSH 에서도 유사한 방식을 사용함

# SSL/TLS

## SSL/TLS로 암호화 통신을 하는 방식

둘다 서버와 클라 사이의 통신 구간에 대해 보안 수준을 높이기 위한 프로토콜임.

통신 구간음 암호화하며, 데이터의 위변조를 막는다

대표적인 프로토콜이 HTTPS 이다. 그 외에도 FTP나 메일 프로토콜과 조합하기도 함

넷스케이프 커뮤니케이션즈가 개발했고 이걸 TLS로 표준화 한 다음 기존의 SSL 을 대체했음 근데 관례 떄문에TLS 대신 SSL이라고 부르기도 하지만 보통 최근에 도입했으면 TLS라고 보면된다

# SSH

원격지에 있는 서버를 제어하기 위해 만들어진 telnet을 대체하는 프로토콜 공개키와 공유키를 조합한 방식으로 통신을 암호홤

인증 방식으로는 패스워드 인증 이나 공개 키 인증 등을 사용함 / 전자 인증서는 사용하지 않는 대신 서버나 클라가 만든 공개키를 쓰낟.

## SSH의 공개 키 인증 방식

공개 키 인증 방식에서는 클라측에서 공개 키를 만든 후에 그 키를 미리 접속할 서버에 등록해 두어 인증에 사용한다. 사전에 공개 키를 등록해야 하는 번거로움이 있지만, 이후부터는 원격 접속을 할 때마다 패스워드를 입력하지 않아도 된다.

# 방화벽

다양한 통신 접점에서 컴퓨터 보호하기

해킹과 같은 악의적인 접근을 차단할때 사용하는 것이 방화벽이다.

방화벽이 있으면 허용된 통신만 들어옴

시큐리티 홀 ⇒ 정보 유출과 같은 보안 취약점을 잠재한 프로그램상의 결함을 의미 그냥 방치해 두면 언젠가는 악의적인 공격으로 뚫릴 수 있는 보안상의 구멍

## 접속을 허가하고 차단하는 방법

패킷 내의 정보를 확인한다. 패킷 필터 / 서킷 레벨 게이트웨이/ 앱 게이트웨이 3가지 유형으로 분류

앱 게이트웨이 에서 url 블랙리스트 / 금지 패턴 차단

서킷 레벨 게이트웨이는 데이트 주고 받을때 직접 연결 못하게 하고 중간에서 통신을 중계하 ㅁ

패킷 필터 : 80 포트이외 차단 같은거

- 가정용 초고속 인터넷 라우터도 방화벽 역할을 함
  - 특별히 설정을 바꾸지 않는 한 외부에서 시작한 통신에 대해서는 접속을 허용하지 않음

# 무선 LAN의 보안

WEP / WPA 등이 있음

WEP : 802.11 의 일부 , 사용자가 지정한 WEP 키와 24비트의 초기화 벡터 값을 사용해서 암호화에 필요한 키를 생성한다.

WPA

WPA2: 블록 암호인 AES 사용

IEEE 802.11i ⇒ WPA, WPA2 를 표준 규격화 한거

## 스트림 암호화 방식과 블록 암호화 방식

무선 LAN 통신은 안전해야 하면서도 동시에 고속으로 처리되어야 함. 그래서 암복호를 할 때 연산 처리 부담이 큰 공개 방식은 사용 안하고 공유 키 사용

WPA 이전에는 공유 키 방식의 하나인 스트림 암호화 방식이었으나 WPA2 에서는 블록 암호화 방식

스트림 암호화 ⇒ 선두에서 차례차례 암호화

블록 암호화 ⇒ 64비트 길이의 블록에 분할

## 패스프레이즈와 취약성

패스프레이즈(WEP에서는 WEP키)라고 부르는 사용자가 지정한문자열과 초기화 벡터 라고 부르는 조금씩 변하는 값을 조합하여 암호화를 위한 공유 키를 만듦

초기화 벡터가 바뀌면서 공유키도 따라 바뀌기 때문에 암호화는 간단하고 처리속도가 빠른 반면에 복호화는 어렵게 만들어져 있음.

# VPN

방화벽과 같은 각종 보안 기술을 적용하면 LAN 내의 보안은 어느 정도 안전하게 구성 가능 기업 환경에서는 본사와 지사와 같이 원격지와 통시늘 해야 할 경우가 있는데 MIME 나 SFTP 와 같은 보안 프로토콜으 하나한 사용하는건 관리 측면에서 적지않은 부담이 되기 떄문에 ⇒ 통신 전체를 안전하게 하는게 VPN

### 인터넷 VPN / 클로즈드 VPN

클로즈 PN은 인터넷과 분리된 별개 회선을 사용한다.

## VPN에 사용되는 기술

IPsec 이나 PPTP 등이 있다.

IPsec에 L2TP를 조합한 조합도 폭넓게 사용됨

IPsec에는 사용자별 인증하는 기능이 없으므로 L2TP를 조합해서 사용함

## 캡슐화와 터널링

VPN에서는 헤더가 여러개 붙은 복잡한 패킷이 나오는데 이것은 IP패킷을 PPP → L2TP → IPsec 순서로 처리한 후의 최종 형태다. 이런 처리방식을 쉽게 표현한게 캡슐화랑 터널링임

캡슐화는 통신 데이터의 구조를 알약의 캡슐 모양에 비유한 것

한 프로토콜의 데이터에 다른 프로토콜의 헤더와 트레일러를 추가하는 것을 다른 프로토콜의 캡슐에 넣는 것처럼 표현

터널링의 예로는 VPN / HTTPS PPPoE IPV6 over IPv4 등이있다.
