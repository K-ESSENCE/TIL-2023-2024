# 애플리케이션 계층의 역할

### 애플리케이션 계층은 사용자가 직접 사용하며 체감하는 계층

전송 이하 계층들은 데이터 전송을 담당하고 있으므로 이들 데이터 전송 관련 계층을 제외한 모든 영역이 앱 계층의 범주라고 보면 된다.

### 사용자가 직접 사용하는 프로토콜

HTTP : 웹 클라이언트와 웹 서버 사이에서 웹 페이지 데이터를 주고 받는다.

POP,SMTP,IMAP: 메일을 송수신하고 보관한다.

SMB,AFP : LAN 안에서 파일을 공유한다.

FTP: 서버를 통해 파일을 주고받는다.

Telnet, SSH : 원격에서 서버를 제어

### 사용자가 간접적으로 사용하는 프로토콜

DNS : 도메인 , ip 어드레서 정보 서로 변환

DHCP : LAN 내의 컴퓨터에게 IP어드레스 할당

SSL/TLS : 통신 데이터 암호화해서 주고받을 때

NTP: 네트워크에 연결된 장비들의 시스템 시간을 동기화할 떄 사용

LDAP : 네트워크에 연결된 자원의 통합관리에필요한 디렉터리 서비스 제공

# 웹페이지를 전송하는 HTTP

### 웹 페이지가 표시되기까지의 과정

1. 보고싶은 웹 페이지 url 요청
2. 웹페이지 html을 응답
3. html 내용을 보고 추가적인 css나 jpeg이 필요하면 또 요청
4. 조합해서 표현

음 굉장히 단순하게 해놨군

### HTTP 메시지

HTTP 프로토콜 사용하고 요청과 응답의 두 가지 형태

HTTP 메시지에는 요청 정보 행 / 응답정보 행/ 헤더 / 빈줄 / 메시지 바디 가있음

### HTTP 는 상태가없다.

ㅇ 안다 무상태

### HTTP 요청과 URL

스키마 호스트 도메인 디렉터리 파일

GET뒤에 디렉터리 / 파일 / 프로토콜의 버전 정보

HOST에 웹 서버 정보

이후 웹 브라우저에 관한 정보

get의 경우 별도의 메시지 바디가 없음.

### 상태코드

100 continue ⇒ 헤더는 받았고 바디가 올 것을 기다리고 있음

101 Switching Protocols ⇒ 클라이언트가 서버에게 프로토콜 바꾸자고 제안하고 수락

200 Ok

201

301 ⇒ 요청한 내용이 다른 경로로 옮겨졌음 이후 옮겨진 경로로 요청해야함

302⇒: 임시로 옮겨진 것이라 이후에도 동일한 경로로 요청

304 ⇒ 갱신 안됨

# 웹서버와 웹 어플리케이션

## 검색 서비스에 게시판까지

동적으로 만들어 주는 것이 웹 서비스나 웹 애플리케이션임.

### CGI와 서버 사이드 프로그램

웹 서버에서 동작하는 프로그램을 서버 사이드 프로그램 혹은 서버 측 프로그램이라고 부른다. 서버 측 프로그램은 HTTP 메시지를 주고받는다는 조건만 맞으면 구현 방법은 어떤 것이라도 상관 없기 떄문에 Perl Python Ruby 등 다양한 언어로 개발됨 웹 초창기에는 이걸 실행하기위해 CGI라는 방식을 사용했으나 지금은 웹 서버 추가 모듈 형태로 동작하는 방식.

## 웹 서비스의 사용성을 높여주는 AJAX

웹 브라우저가 웹 서버로 요청하는 게 아니라 자바스크립트로 작성된 프로그램이 웹 서버와 통신한다.

전체를 다시 그리지 않고 필요한 부분만 갱신처리. ⇒ 자연스러운 서비스 이용과 향상된 사용자 경험

# 세션을 유지하기 위한 쿠키

## 쿠키로 세션을 유지한다

동일한 사용자 접속 세션으로 인식할 수 있도록 Cookie를 허용함.

## 쿠키가 하는 일

쿠키 정보는 악용될 경우 보안 문제가 발생할 수 있기 떄문에 이에 대한 조치가 필요함.

## 쿠키를 사용해서 주고받는 정보

유출되었을때 보안 문제가 생길 만한 정보는 클라이언트 PC의 쿠키에 저장하지 말아야 한다.

각종 정보는 서버 쪽에 저장하는 것이 원칙이고 동일한 사용자인지 확인하기 위한 세션ID 등의 식별 정보만 클라이언트에 쿠키로 저장하도록 제한해야 한다.

# 이메일

## 송신과 수신에 서로 다른 프로토콜을 사용한다

발신 ⇒ SMTP

수신 ⇒ POP

## SMTP의 동작 방식

http와 다르게 스테이트 풀 이라서 전송 종료 명령이 내려져야 통신을 종료함.

접속 요청하고 mail from 송신자 주소 보내고 rcpt to 수신자 주소 보내고 메일 데이터 전송하고 종료

메일 서버 간의 메일 중계에도 SMTP가 사용된다.

## 이메일을 수신하는 POP

SMTP 프로토콜을 통해 전송된 메일은 최종적으로 수신자의 메일 서버에 저장됨 이후 메일 서버에 저장된 메일을 확인할 때에는 pop프로토콜을 사용함. 메일을 수신하는것 외에도 수신한 메일 건수나 용량확인, 메일 삭제와 같은 처리에도 pop 프로토콜을 사용함.

## 서버에 메일을 보관하는 IMAP

POP프로토콜은 기본적으로 클라이언트가 메일을 수신하면 메일 서버에 보관된 메일을 삭제 하게 되어있다.

메일을 오랫동안 보관하려면 클라 pc에 메일을 보관할 저장 공간을 확보해 두어야 한다.

이에 반해 IMAP 프로토콜은 클라이언트 PC가 메일을 수신하더라도 메일 서버에서 수신한 메일을 지우지 않고 보관하게 되어 있다.

이런 방식은 저장공간이 충분하지 않은 스마트폰 등의 휴대기기에서 많이 활용 .

클라이언트에 메일 데이터를 보관하지않음.

# PC끼리 파일 공유

## 피어 투 피어 통신

특별히 공유를 위한 서버 필요없고 공유할 컴퓨터끼리 네트워크에 접속하기만 하면 된다.

## 공유할 상대 컴퓨터를 찾는 방법

피어 투 피어는 중앙에서 관리하는 서버가 없음 LAN 에 연결된 컴퓨터들 중 어떤 컴퓨터가 공유를 하고 있는지 알 방법이 없기 때문에 연결되면 다른 모든 컴에게 자신이 연결되었음을 통보함.

## 파일 공유 프로토콜은 OS 마다 서로 다름

윈도우는 SMB 맥은 AFP

최근에는 상관 무

# 파일을 전송하는 FTP

## 서버로 파일 전송

LAN에서는 파일 공유와 같은 더 간단한 방법이 있어서 이 방법은 인터넷으로 연결된 서버에 파일 전송할 때 사용

명령어로 디렉토리 만들거나 지우거나 업로드 하기도함

## 웹 페이지 파일을 업로드하는 경우

FTP는 웹 서버로 웹 페이지를 전송할 떄 자주 사용됨.

한 대의 서버에서 FTP 서버 프로그램과 웹 서버 프로그램을 함께 구동하고 있다면, FTP로 HTML 파일을 전송하고 이파일을 웹 서버가 HTTP를 통해 서비스하는 것이 가능하다.

## 데이터 커넥션과 컨트롤 커넥션

FTP에서 크게 파일을 주고받기 위한 데이터 커넥션과 명령어를 보내기 위한 컨트롤 커넥션의 두 가지 접속 형태를 사용한다. 이렇게 접속 형태가 분리되어 있으면 파일 전송 중에도 명령을 줄 수 있어 전송중인 파일을 중단시키는 것이 가능함.

## 액티브 모드와 패시브 모드

방화벽이나 가정용 초고속 인터넷 라우터를 사용하는 경우 외부와의 통신을 차단하는 경우가 많음.

FTP서비스에서는 서버 내부에서 외부로 나가는 통신을 방화벽이 차단해서 파일 전송이 안 되는 경우가 발생하기도 하는데 이때는 패시브 모드를 사용해서 클라에서 서버쪽으로 역방향 데이터 커넥션을 만들어 주면 파일 전송 가능
